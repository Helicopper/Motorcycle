{"remainingRequest":"/var/www/html/ai-project/node_modules/_vue-loader@15.6.2@vue-loader/lib/index.js??vue-loader-options!/var/www/html/ai-project/src/components/graphs/graph_relation.vue?vue&type=style&index=0&id=480bf238&scoped=true&lang=css&","dependencies":[{"path":"/var/www/html/ai-project/src/components/graphs/graph_relation.vue","mtime":1551454730486},{"path":"/var/www/html/ai-project/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/var/www/html/ai-project/node_modules/_vue-loader@15.6.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/var/www/html/ai-project/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/var/www/html/ai-project/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/ai-project/node_modules/_vue-loader@15.6.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.graph {\n  width: 100%;\n  min-height: 300px;\n  max-height: 400px;\n}\n\n.tabs {\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1), 0 3px 10px 0 rgba(0, 0, 0, 0.15);\n  padding: 10px;\n  /* border-radius: 5px; */\n}\n",{"version":3,"sources":["graph_relation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyOA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"graph_relation.vue","sourceRoot":"src/components/graphs","sourcesContent":["// 关系图\n<template>\n  <div>\n    <el-tabs type=\"border-card\">\n      <el-tab-pane v-for=\"(data, index) in items\" :key=index :label=\"index\">\n        <div class=\"graph\" :id=\"keyWord+'_'+index\"></div>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n<script>\n  let echarts = require('echarts');\n  import $router from \"./../../util/router\"\n\n  export default {\n    name: \"demandMap\",\n    props: {\n      items: {\n        type: Object,\n        default () {\n          return {\n            \"test\": \"test\"\n          }\n        }\n      },\n      keyWord: {\n        type: String,\n        default () {\n          return \"keyString\"\n        }\n      }\n    },\n    data() {\n      return {\n        // graph_title: \"专家合作网络\"\n      }\n    },\n    mounted() {\n      this.start_draw();\n    },\n    methods: {\n      start_draw() {\n        let itemData = this.items;\n        for (var i in itemData) {\n          console.log(\"key :\" + this.keyWord + \"_\" + i);\n          let id = this.keyWord + \"_\" + i;\n          this.draw_relation(id, itemData[i]);\n        }\n      },\n      draw_relation(id, graph_data) {\n        let graph_title = graph_data.title;\n        let data = graph_data.data;\n        // console.log(JSON.stringify(data));\n        // 初始化\n        let chart = document.getElementById(id);\n\n        var initial = function () {\n          let chartParent = chart.parentNode.parentNode;\n          chart.style.width = chartParent.clientWidth - 30 + \"px\";\n          chart.style.margin = \"0 auto\";\n          chart.style.height = (chartParent.clientWidth *0.75 - 30) + \"px\";\n        }\n        initial();\n\n        // 获取当前容器宽度，内联样式\n        let chart_width = chart.parentNode.parentNode.clientWidth;\n        console.log(\"chart_width: \" + chart_width);\n\n        // 数据中点的个数\n        let nodes = data.node;\n        // console.log(nodes)\n        let node_num = nodes.length;\n\n        // 色盘\n        let colors = [\"#D53A35\", \"#334B5C\", \"#D48265\", \"#9FDABF\", \"#7FAE90\", \"#DE9325\", \"#CFB2A9\", \"#797B7F\"]\n\n        // echarts 实例初始化\n        let myChart = echarts.init(chart);\n\n        let option = {\n          title: {\n            text: graph_title\n          },\n          animationDurationUpdate: 1500,\n          animationEasingUpdate: 'quinticInOut',\n          toolbox: {\n            show: true,\n            feature: {\n              saveAsImage: {\n                show: true,\n                type: \"png\",\n                pixelRatio: 3\n              },\n              restore: {\n                show: true,\n              }\n            }\n          },\n          series: [{\n            type: 'graph',\n            // --------------------------\n            // 布局类型\n            // layout: \"none\",\n            layout: 'circular',\n            circular: {\n              rotateLabel: true,\n            },\n            // layout: 'force',\n            // force: {\n            //   initLayout: \"circular\",\n            //   repulsion: 100,\n            //   // gravity: 0.2,\n            //   // edgeLength: [200, 300]\n            //   // edgeLength: (chart_width / node_num) < 25 ? 25 : ((chart_width / node_num) + 10)\n            // },\n            // --------------------------\n\n            // 位置\n            top: \"20%\",\n            bottom: \"20%\",\n            right: \"20%\",\n            left: \"20%\",\n            progressiveThreshold: 500,\n            roam: true,\n            focusNodeAdjacency: true,\n            // 点的数据  ---------------------------------\n            data: data.node.map(function (node, index) {\n              // let this_value = node.value\n              // if(!this_value) this.value = [\"1\"];\n\n              return {\n                name: node.name,\n                // value: this_value[0],\n                // symbolSize: this_value[0]/800,\n                value: node.value,\n                symbolSize: Math.log(node.value+1),\n                // symbolSize: node_num>20 ? (chart.parentNode.parentNode.clientWidth / 17) : (chart.parentNode.parentNode.clientWidth / 10),\n                // symbolSize: chart.parentNode.parentNode.clientWidth / (node_num),\n                itemStyle: {\n                  color: colors[index % colors.length],\n                  // 透明度\n                  opacity: 0.9\n                }\n              };\n            }),\n            // 边的数据  ---------------------------------\n            links: data.link.map(function (link) {\n              return {\n                source: link.source,\n                target: link.target\n              };\n            }),\n            // 边两端标记\n            edgeSymbol: ['none', 'arrow'],\n            edgeSymbolSize: 5,\n            label: {\n              show: true,\n              position: \"right\",\n              color: \"#000\"\n            },\n            lineStyle: {\n              width: 1,\n              curveness: 0.3,\n              opacity: 0.9\n            },\n            tooltip: {\n              show: true,\n              formatter: function (params) {\n                // 判断触发的类型是 node 还是 edge\n                if (params.dataType === \"node\")\n                  return params.data.name + \": \" + params.data.value;\n                else if (params.dataType === \"edge\") {\n                  return params.data.source + \" --> \" + params.data.target;\n                }\n              }\n            },\n            // 强调样式\n            emphasis: {\n              label: {\n                show: true,\n                position: 'inside',\n                fontSize: 18,\n                fontWeight: \"bold\",\n                color: \"#000\",\n                textBorderColor: \"#fff\",\n                textBorderWidth: 2\n              },\n              itemStyle: {\n                shadowColor: 'rgba(0, 0, 0, 0.5)',\n                shadowBlur: 5,\n                opacity: 1\n              },\n              lineStyle: {\n                width: 1.5,\n                color: \"#000\",\n                opacity: 1,\n                // shadowColor: 'rgba(0, 0, 0, 0.7)',\n                // shadowBlur: 5,\n              },\n              edgeLabel: {\n                show: false,\n                color: \"#000\",\n                formatter: function (params) {\n                  return params.data.source + \"-->\" + params.data.target;\n                }\n              }\n            }\n          }]\n        };\n\n        myChart.setOption(option);\n\n        window.addEventListener('resize', function () {\n          initial();\n          // chart.style.width = this.initial_style(chart);\n          myChart.resize()\n        })\n\n        myChart.on(\"click\", function (params) {\n          if (params.dataType === \"node\") {\n            // window.open('https://www.baidu.com/s?wd=' + encodeURIComponent(params.data.name));\n            $router.push({\n              path: \"/displayInfo\",\n              query: {query: params.data.name}\n            })\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .graph {\n    width: 100%;\n    min-height: 300px;\n    max-height: 400px;\n  }\n\n  .tabs {\n    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1), 0 3px 10px 0 rgba(0, 0, 0, 0.15);\n    padding: 10px;\n    /* border-radius: 5px; */\n  }\n</style>"]}]}