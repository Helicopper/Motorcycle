{"remainingRequest":"/ssd1/gfy/ai-project/node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!/ssd1/gfy/ai-project/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!/ssd1/gfy/ai-project/node_modules/_vue-loader@15.6.2@vue-loader/lib/index.js??vue-loader-options!/ssd1/gfy/ai-project/src/components/textExpandShrink.vue?vue&type=script&lang=js&","dependencies":[{"path":"/ssd1/gfy/ai-project/src/components/textExpandShrink.vue","mtime":1574946998000},{"path":"/ssd1/gfy/ai-project/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js","mtime":1574947018000},{"path":"/ssd1/gfy/ai-project/node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js","mtime":1574947019000},{"path":"/ssd1/gfy/ai-project/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js","mtime":1574947018000},{"path":"/ssd1/gfy/ai-project/node_modules/_vue-loader@15.6.2@vue-loader/lib/index.js","mtime":1574947026000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport _parseFloat from \"/ssd1/gfy/ai-project/node_modules/@babel/runtime-corejs2/core-js/parse-float\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'Spread',\n  props: ['text'],\n  data: function data() {\n    return {\n      introduce: \"\",\n      // 是否展示所有文本内容\n      showTotal: true,\n      // 显示展开还是收起\n      exchangeButton: true,\n      // 是否显示展开收起按钮\n      showExchangeButton: false,\n      rem: '' // text:text,\n\n    };\n  },\n  mounted: function mounted() {\n    //console.log(\"开始mounted！\")\n    this.init(); //console.log(\"执行了mountedinit方法\")\n  },\n  methods: {\n    showTotalIntro: function showTotalIntro() {\n      //console.log(\"this.showTotal:\"+this.showTotal);\n      this.showTotal = !this.showTotal;\n      this.exchangeButton = !this.exchangeButton;\n    },\n    getRem: function getRem() {\n      //console.log('getRem');\n      var defaultRem = 16;\n      var winWidth = window.innerWidth; //console.log('winWidth:' + winWidth);\n\n      var rem = winWidth / 375 * defaultRem;\n      return rem;\n    },\n    init: function init() {\n      // this.introduce = '拥有财富、名声、权力，这世界上的一切的男人--哥尔·D·罗杰，在被行刑受死之前说了一句话，让全世界的人都涌向了大海。“想要我的宝藏吗？如果想要的话，那就到海上去找吧，我全部都放在那里。”，世界开始迎接“大海贼时代”的来临。拥有财富、名声、权力，这世界上的一切的男人 “海贼王”哥尔·D·罗杰，在被行刑受死之前说了一句话，让全世界的人都涌向了大海。“想要我的宝藏吗？如果想要的话，那就到海上去找吧，我全部都放在那里。”，世界开始迎接“大海贼时代”的来临。';\n      this.introduce = this.text; //console.log(\"init了introduce数据\");\n    }\n  },\n  watch: {\n    deep: true,\n    'introduce': function introduce() {\n      //console.log(\"开始watch！\");\n      this.$nextTick(function () {\n        //console.log('开始nextTick');\n        // 判断介绍是否超过四行\n        var rem = _parseFloat(this.getRem()); //console.log('watch 中的rem', rem);\n\n\n        if (!this.$refs.desc) {\n          //console.log('desc null');\n          return;\n        }\n\n        var descHeight = window.getComputedStyle(this.$refs.desc).height.replace('px', ''); //console.log('descHeight:' + descHeight);\n        //console.log('如果 descHeight 超过' + (5.25 * rem) + '就要显示展开按钮');\n\n        if (descHeight > 2 * rem) {\n          console.log('超过了四行'); // 显示展开收起按钮\n\n          this.showExchangeButton = true;\n          this.exchangeButton = true; // 不是显示所有\n\n          this.showTotal = false;\n        } else {\n          // 不显示展开收起按钮\n          this.showExchangeButton = false; // 没有超过四行就显示所有\n\n          this.showTotal = true; //console.log('showExchangeButton', this.showExchangeButton);\n          //console.log('showTotal', this.showTotal);\n        }\n      }.bind(this));\n    }\n  }\n};",{"version":3,"sources":["textExpandShrink.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAgBA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,KAAA,EAAA,CAAA,MAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA;AACA,MAAA,SAAA,EAAA,IAHA;AAIA;AACA,MAAA,cAAA,EAAA,IALA;AAMA;AACA,MAAA,kBAAA,EAAA,KAPA;AAQA,MAAA,GAAA,EAAA,EARA,CASA;;AATA,KAAA;AAWA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA;AACA;AACA,SAAA,IAAA,GAFA,CAGA;AACA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA;AACA,WAAA,SAAA,GAAA,CAAA,KAAA,SAAA;AACA,WAAA,cAAA,GAAA,CAAA,KAAA,cAAA;AACA,KALA;AAMA,IAAA,MANA,oBAMA;AACA;AACA,UAAA,UAAA,GAAA,EAAA;AACA,UAAA,QAAA,GAAA,MAAA,CAAA,UAAA,CAHA,CAIA;;AACA,UAAA,GAAA,GAAA,QAAA,GAAA,GAAA,GAAA,UAAA;AACA,aAAA,GAAA;AACA,KAbA;AAcA,IAAA,IAdA,kBAcA;AACA;AACA,WAAA,SAAA,GAAA,KAAA,IAAA,CAFA,CAGA;AAEA;AAnBA,GArBA;AA0CA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AAEA,iBAAA,qBAAA;AACA;AACA,WAAA,SAAA,CAAA,YAAA;AACA;AACA;AACA,YAAA,GAAA,GAAA,YAAA,KAAA,MAAA,EAAA,CAAA,CAHA,CAIA;;;AACA,YAAA,CAAA,KAAA,KAAA,CAAA,IAAA,EAAA;AACA;AACA;AACA;;AACA,YAAA,UAAA,GAAA,MAAA,CAAA,gBAAA,CAAA,KAAA,KAAA,CAAA,IAAA,EAAA,MAAA,CAAA,OAAA,CAAA,IAAA,EAAA,EAAA,CAAA,CATA,CAUA;AACA;;AACA,YAAA,UAAA,GAAA,IAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EADA,CAEA;;AACA,eAAA,kBAAA,GAAA,IAAA;AACA,eAAA,cAAA,GAAA,IAAA,CAJA,CAKA;;AACA,eAAA,SAAA,GAAA,KAAA;AACA,SAPA,MAOA;AACA;AACA,eAAA,kBAAA,GAAA,KAAA,CAFA,CAGA;;AACA,eAAA,SAAA,GAAA,IAAA,CAJA,CAKA;AACA;AACA;AACA,OA3BA,CA2BA,IA3BA,CA2BA,IA3BA,CAAA;AA4BA;AAhCA;AA1CA,CAAA","sourcesContent":[" <template>\n  <div>\n    <div :class=\"showTotal ? 'total-introduce' : 'detailed-introduce'\">\n      <div class=\"intro-content\" :title=\"introduce\" ref=\"desc\">\n        <span class=\"merchant-desc\" v-if=\"introduce\">\n          <span v-html=\"introduce\"></span>\n        </span>\n        <div class=\"unfold\" @click=\"showTotalIntro\" v-if=\"showExchangeButton\">\n          <p>{{exchangeButton ? '展开' : '收起'}}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Spread',\n  props:['text'],\n  data () {\n    return {\n      introduce: \"\",\n      // 是否展示所有文本内容\n      showTotal: true,\n      // 显示展开还是收起\n      exchangeButton: true,\n      // 是否显示展开收起按钮\n      showExchangeButton: false,\n      rem: '',\n      // text:text,\n    };\n  },\n  mounted () {\n    //console.log(\"开始mounted！\")\n    this.init();\n    //console.log(\"执行了mountedinit方法\")\n  },\n  methods: {\n    showTotalIntro () {\n      //console.log(\"this.showTotal:\"+this.showTotal);\n      this.showTotal = !this.showTotal;\n      this.exchangeButton = !this.exchangeButton;\n    },\n    getRem () {\n      //console.log('getRem');\n      const defaultRem = 16;\n      let winWidth = window.innerWidth;\n      //console.log('winWidth:' + winWidth);\n      let rem = winWidth / 375 * defaultRem;\n      return rem;\n    },\n    init () {\n      // this.introduce = '拥有财富、名声、权力，这世界上的一切的男人--哥尔·D·罗杰，在被行刑受死之前说了一句话，让全世界的人都涌向了大海。“想要我的宝藏吗？如果想要的话，那就到海上去找吧，我全部都放在那里。”，世界开始迎接“大海贼时代”的来临。拥有财富、名声、权力，这世界上的一切的男人 “海贼王”哥尔·D·罗杰，在被行刑受死之前说了一句话，让全世界的人都涌向了大海。“想要我的宝藏吗？如果想要的话，那就到海上去找吧，我全部都放在那里。”，世界开始迎接“大海贼时代”的来临。';\n      this.introduce = this.text;\n      //console.log(\"init了introduce数据\");\n\n    }\n  },\n  watch: {\n    deep: true,\n    'introduce': function () {\n      //console.log(\"开始watch！\");\n      this.$nextTick(function () {\n        //console.log('开始nextTick');\n        // 判断介绍是否超过四行\n        let rem = parseFloat(this.getRem());\n        //console.log('watch 中的rem', rem);\n        if (!this.$refs.desc) {\n          //console.log('desc null');\n          return;\n        }\n        let descHeight = window.getComputedStyle(this.$refs.desc).height.replace('px', '');\n        //console.log('descHeight:' + descHeight);\n        //console.log('如果 descHeight 超过' + (5.25 * rem) + '就要显示展开按钮');\n        if (descHeight > 2 * rem) {\n          console.log('超过了四行');\n          // 显示展开收起按钮\n          this.showExchangeButton = true;\n          this.exchangeButton = true;\n          // 不是显示所有\n          this.showTotal = false;\n        } else {\n          // 不显示展开收起按钮\n          this.showExchangeButton = false;\n          // 没有超过四行就显示所有\n          this.showTotal = true;\n          //console.log('showExchangeButton', this.showExchangeButton);\n          //console.log('showTotal', this.showTotal);\n        }\n      }.bind(this));\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped rel=\"stylesheet/less\">\n  .top-prove {\n    height: 100px;\n    width: 100%;\n    background: #dddddd;\n    text-align: center;\n    line-height: 100px;\n  }\n  .total-introduce {\n    height: auto;\n    overflow: hidden;\n    font-size: 14px;\n    color: #434343;\n    margin: 10px;\n    .intro-content {\n      .merchant-desc {\n        width: 100%;\n        line-height: 21px;\n      }\n    }\n    .unfold {\n      display: block;\n      z-index: 11;\n      float: right;\n      width: 40px;\n      height: 21px;\n      p {\n        margin: 0;\n        line-height: 21px;\n        color: #7fbe87;\n      }\n    }\n  }\n  .detailed-introduce {\n    font-size: 14px;\n    color: #434343;\n    position: relative;\n    overflow: hidden;\n    margin: 10px;\n    .intro-content {\n      // 最大高度设为4倍的行间距\n      max-height: 84px;\n      line-height: 21px;\n      word-wrap: break-word;\n      /*强制打散字符*/\n      word-break: break-all;\n      background: #ffffff;\n      /*同背景色*/\n      color: #ffffff;\n      overflow: hidden;\n      .merchant-desc {\n        width: 100%;\n        line-height: 21px;\n      }\n      &:after,\n      // 这是展开前实际显示的内容\n      &:before {\n        content: attr(title);\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        color: #434343\n        // overflow: hidden;\n      }\n      // 把最后最后一行自身的上面三行遮住\n      &:before {\n        display: block;\n        overflow: hidden;\n        z-index: 1;\n        max-height: 63px;\n        background: #ffffff;\n      }\n      &:after {\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n        height: 81px;\n        /*截取行数*/\n        -webkit-line-clamp: 4;\n        text-overflow: ellipsis;\n        -webkit-box-sizing: border-box;\n        box-sizing: border-box;\n        /*行首缩进字符数，值为[(截取行数-1)*尾部留空字符数]*/\n        text-indent: -12em;\n        /*尾部留空字符数*/\n        padding-right: 4em;\n      }\n      .unfold {\n        z-index: 11;\n        width: 40px;\n        height: 21px;\n        outline: 0;\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        p {\n          margin: 0;\n          line-height: 21px;\n          color: #7fbe87;\n        }\n      }\n    }\n  }\n  .bottom-prove {\n    height: 100px;\n    width: 100%;\n    background: #dddddd;\n    text-align: center;\n    line-height: 100px;\n  }\n  .change-buttom {\n    font-size: 14px;\n    color: #2371be;\n    .long {\n      text-align: 21px;\n      text-align: center;\n      height: 21px;\n    }\n    .short {\n      text-align: 21px;\n      text-align: center;\n      height: 20px;\n    }\n  }\n</style>\n"],"sourceRoot":"src/components"}]}